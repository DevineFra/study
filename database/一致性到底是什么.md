# 一致性的理解
数据库系统中，一致性这个词在不同的环境下有着不同的含义：
* ACID中的Consistency
* 多版本一致性
* CAP理论中的一致性
* 多副本的一致性
* 一致性hash

这几个一致性的含义完全不是一回事。

## ACID中的Consistency
在单机数据库中，AID都属于数据库的特征，数据库本身要具备原子性、隔离性、持久性。然而C是依赖于AID的特性以及上层业务的设计来实现的。
举个例子，一致性代表着数据库的在进行了任何修改、任何时间都应该保证一个符合预定义规则的状态，这个预定义规则一般都是业务的规则，和
数据库本身无关。举个例子：我要求所有记录个人金额的值不能小于0，那么我可以通过设置字段的约束来保证，这样在事务的进行中如果出现违反
约束的情况则会返回失败。

## 多版本一致性
多版本并发控制技术是在并发事务场景下，解决读写冲突问题，并提供事务之间的隔离，提高并发读的性能。多版本意味着单份数据存储了多个版本，
我们要保证：
* 不读非本事务的未提交事务（脏读）
* 读取小于读取版本号的所有已提交数据（根据需求是否要保证事务内一致性的连续->不可重复度）
* 读写不互斥
在分布式场景下的多版本一致性维护更为复杂，除了要保证跨节点单事务的ACID，还要保证全局事务唯一、单调递增、全局一致性视图、2PC协调等。
  

## CAP中的Consistency
CAP是在分布式场景下，一个系统只能同时满足Consistency、Availablity、Partition Tolerance三种特性中的两个。那么这里的一致性
可能对于大部分人来讲更好理解，他代表的是所有节点对于同一数据的读取操作都应该返回最新的、一致的值。

## 多副本的一致性
多副本的一致性和CAP的一致性有相似之处，但并不完全相同。  
在CAP中，更多强调的是强一致或线性一致，他代表这在分布式场景下所有的数据读写操作也要在业务看来是在单节点下执行的，这样意味着顺序
性、即时可见性、外部一致性。  
而多副本这是另一回事，我们可以在分布式系统中讨论多副本也可以在单机场景下讨论多副本。他实际是为了提高可用性和扩展性，通过复制的方式
来分发数据，在这种场景下副本之间的数据一致性就成了一个关键问题,常见的模型包括：
* 最终一致性：所有副本最终会达到一致状态，但不保证具体的时间
* 会话一致性：在一个会话期间，用户看到的数据是强一致的，但是不同会话会暂时看到不一致的数据。
* 强一致性：和CAP理论中的一致性类似，要求保证全局的强一致性视图

## 一致性HASH
在分布式场景下，一致性hash这是对于传统hash算法的优化，保证对于某个数据和节点的映射关系在进行横向扩展的场景下尽量保证不变，来应对
高效的数据分配和负载均衡，提高系统的稳定性。

# 分布式数据库场景下如何实现一致性读
